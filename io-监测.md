## IO

####IO的概念

I/O 即输入/输出(Input/Output)，通常指存储设备的读写操作

####几个概念

>IO块大小：连续读出扇区数目的多少，一般机械硬盘比ssd要大

>随机读写：每次IO请求的数据在磁盘上的位置跨度很大

>顺序读写：数据在磁盘的位置是连续的

>并发IO：一般在磁盘阵列上才会有

>磁盘服务时间：

        寻道时间 Tseek是指将读写磁头移动至正确的磁道上所需要的时间
        旋转延迟 Trotation是指盘片旋转将请求数据所在扇区移至读写磁头下方所需要的时间
        数据传输时间 Ttransfer是指完成传输所请求的数据所需要的时间

####I/O 主要的指标

>IOPS

IOPS (Input/Output Per Second)即每秒的输入输出量(或读写次数)，是衡量磁盘性能的主要指标之一。IOPS是指单位时间内系统能处理的I/O请求数量，一般以每秒处理的I/O请求数量为单位，I/O请求通常为读或写数据操作请求。

IOPS = 1000 ms/ (寻道时间 + 旋转延迟)。可以忽略数据传输时间


>吞吐量

即是单位时间内，设备（这里是存储设备）成功传输的数据数量

####IO性能评估

对于顺序读写，一般应用在传输大文件的场景中，数据吞吐量是关键衡量指标，机械硬盘和ssd差别不大，磁盘阵列(raid1 raid10)性能要更好些

对于随机读写，一般应用在小文件存储（常见的如数据库服务 邮件 图片等），iops是关键衡量指标，ssd性能明显优于机械硬盘

####几种类型磁盘对照

_数据非本人测试_

>顺序读

可以看到 在对4KB数据包进行连续读的情况下:

SSD其速度可以达到404M/S，IOPS达到103K/S

SAS其速度可以达到190M/S，IOPS达到41K/S

SATA其速度可以达到124M/S，IOPS达到31K/S

顺序读，SAS总体表现是SATA硬盘的1.5倍，SSD总体表现是SATA硬盘的4倍。

>顺序写

同样的4KB数据包顺序写的情况下，

SSD其速度可以达到592M/S，IOPS达到152K/S

SAS其速度可以达到190M/S，IOPS达到36K/S

SATA其速度可以达到118M/S，IOPS达到31K/S

顺序写，SAS总体表现与SATA硬盘为相同数量级，而SSD整体超过SATA和SAS。

>随机读

同样的4KB数据包随机读的情况下，

SSD其速度可以达到505M/S，IOPS达到129K/S

SAS其速度可以达到1784K/S，IOPS达到456/S

SATA其速度可以达到466K/S，IOPS达到114/S

随机读，SAS总体表现是SATA硬盘的4倍，SSD总体表现是SATA硬盘的一千多倍。

>随机写

同样的4KB数据包随机写的情况下，

SSD其速度可以达到549M/S，IOPS达到140K/S

SAS其速度可以达到1950K/S，IOPS达到512/S

SATA其速度可以达到548K/S，IOPS达到134/S

在接下来的4KB数据包随机写操作中，SSD卡再次展示了其高超的IO性能，高达549M/S的随机写速率，IOPS高达140K。相比之下，SSD总体表现是SATA硬盘的一千多倍。

>结论：

1.SATA和SAS机械硬盘随机读写能力较弱，而顺序读写能力基本与SSD保持在同样的数量级，尤其是顺序读写大文件性能更佳

2.SSD的强项在于随机IO读写，基本可以媲美内存的访问速度，当然其顺序读写能力也处于比较高的水平

3.小块文件随机读，是固态存储相对传统磁盘优势最大的场景。相对磁盘，固态存储设备不存在寻道时间。因此，其性能要比单块性能最优的传统磁盘高出150倍到250倍

4.受寻道时间这个机械因素影响，传统磁盘在随机读写场景，基本没有优势，由于磁盘读和写两个操作时间大概相同，所以随机读和随机写，单块磁盘的性能基本差不多

5.对持续的大块写入请求，固态存储耗费擦除操作（耗时长）的时间大幅增加，而传统的磁盘却好相反，耗时长的寻道操作大幅减小，一次寻道，多次写入

6.传统磁盘，受寻道机械操作影响，在随机操作场景性能不佳，而在大块，持续写入的场景由于寻道操作相对减少，其表现较好，比较适合性能要求不高，对容量较高的场景。




